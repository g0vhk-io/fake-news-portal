FROM python:3.6-jessie
RUN mkdir /app
RUN mkdir /app/static
WORKDIR /app
ADD requirements.txt /app
RUN pip install -U pip && pip install -r requirements.txt
ADD . /app
ARG API_HOST
ARG SOCIAL_AUTH_GOOGLE_OAUTH2_KEY
ARG SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET
ARG MYSQL_DATABASE
ARG MYSQL_USER
ARG MYSQL_PASSWORD
ARG MYSQL_PORT
ARG MYSQL_HOST
ENV API_HOST="$API_HOST"
ENV SOCIAL_AUTH_GOOGLE_OAUTH2_KEY="$SOCIAL_AUTH_GOOGLE_OAUTH2_KEY"
ENV SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET="$SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET"
ENV MYSQL_USER="$MYSQL_USER"
ENV MYSQL_PASSWORD="$MYSQL_PASSWORD"
ENV MYSQL_HOST="$MYSQL_HOST"
ENV MYSQL_DATABASE="$MYSQL_DATABASE"
ENV MYSQL_PORT="$MYSQL_PORT"
CMD ./run.sh
